(self.webpackChunkclient=self.webpackChunkclient||[]).push([[308],{75308:function(t,e,a){"use strict";a.r(e),a.d(e,{SettingModule:function(){return y}});var r=a(56036),l=a(63423),s=a(3679),o=a(88002),n=a(37716),i=a(49344),u=a(29790),m=a(41260),p=a(85557),d=a(32802),c=a(93738),Z=a(35618),f=a(98295),g=a(83166),q=a(38583),A=a(58308),h=a(51095);function x(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"validations.required"),""))}function _(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"validations.required"),""))}function b(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"validations.required"),""))}function T(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"validations.required")))}function L(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"validations.required")))}function U(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&t&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"validations.required")))}function v(t,e){1&t&&(n.TgZ(0,"div"),n.TgZ(1,"mat-form-field"),n.TgZ(2,"mat-label"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n._UZ(5,"input",6),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"mat-form-field"),n.TgZ(8,"mat-label"),n._uU(9),n.ALo(10,"translate"),n.qZA(),n._UZ(11,"input",7),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"mat-form-field"),n.TgZ(14,"mat-label"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n._UZ(17,"input",8),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"mat-form-field"),n.TgZ(20,"mat-label"),n._uU(21),n.ALo(22,"translate"),n.qZA(),n._UZ(23,"input",9),n.ALo(24,"translate"),n.qZA(),n.TgZ(25,"mat-form-field"),n.TgZ(26,"mat-label"),n._uU(27),n.ALo(28,"translate"),n.qZA(),n._UZ(29,"input",10),n.ALo(30,"translate"),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Oqu(n.lcZ(4,10,"setting.server")),n.xp6(2),n.Q6J("placeholder",n.lcZ(6,12,"setting.server")),n.xp6(4),n.Oqu(n.lcZ(10,14,"setting.port")),n.xp6(2),n.Q6J("placeholder",n.lcZ(12,16,"setting.port")),n.xp6(4),n.Oqu(n.lcZ(16,18,"setting.database")),n.xp6(2),n.Q6J("placeholder",n.lcZ(18,20,"setting.database")),n.xp6(4),n.Oqu(n.lcZ(22,22,"setting.user")),n.xp6(2),n.Q6J("placeholder",n.lcZ(24,24,"setting.user")),n.xp6(4),n.Oqu(n.lcZ(28,26,"login.password")),n.xp6(2),n.Q6J("placeholder",n.lcZ(30,28,"login.password")))}const J=[{path:"userSetting",component:(()=>{class t{constructor(t,e,a,r,l){this.toastr=t,this.fb=e,this._translate=a,this._setting=r,this._api=l,this.form1=this.fb.group({username:["",[s.kI.required]],fullname:["",[s.kI.required]],email:["",[s.kI.required]],phone:[""],address:[""],remark:[""],lang:["",[s.kI.required]],timeZoneInfoId:["",[s.kI.required]]})}ngOnInit(){this.languages=this._setting.getOptions().languages,this.loadData()}loadData(){this.timezones$=this._api.common_timezoneList().pipe((0,o.U)(t=>t.data)),this._api.user_getuser().subscribe(t=>this.form1.setValue(t.data))}submit(){this._api.user_saveuser(this.form1.value).subscribe(t=>{1==t.successful&&(this._translate.currentLang!=this.form1.value.lang&&(this._translate.use(this.form1.value.lang),this._setting.setLanguage(this.form1.value.lang)),this.toastr.success(t.message))})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i._W),n.Y36(s.qu),n.Y36(u.sK),n.Y36(m.gb),n.Y36(p.t))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-setting-userSetting"]],decls:68,vars:57,consts:[[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","type","text","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","type","text","formControlName","fullname","required","",3,"placeholder"],["matInput","","type","text","formControlName","email","required","",3,"placeholder"],["matInput","","type","text","formControlName","phone",3,"placeholder"],["fxFlex","100","fxFlex.lt-sm","100"],["matInput","","type","text","formControlName","address",3,"placeholder"],["matInput","","placeholder","Textarea","rows","5","formControlName","remark",3,"placeholder"],[1,"w-full"],["bindLabel","name","bindValue","key","autofocus","","formControlName","lang",3,"items"],["fxFlex","50","fxFlex.lt-sm","100","hidden","true"],["bindLabel","name","bindValue","key","autofocus","","formControlName","timeZoneInfoId",3,"items"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"]],template:function(t,e){1&t&&(n._UZ(0,"page-header"),n.TgZ(1,"mat-card"),n.TgZ(2,"mat-card-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"form",0),n.TgZ(6,"div",1),n.TgZ(7,"div",2),n.TgZ(8,"mat-form-field"),n.TgZ(9,"mat-label"),n._uU(10),n.ALo(11,"translate"),n.qZA(),n._UZ(12,"input",3),n.ALo(13,"translate"),n.YNc(14,x,3,3,"mat-error",4),n.qZA(),n.qZA(),n.TgZ(15,"div",2),n.TgZ(16,"mat-form-field"),n.TgZ(17,"mat-label"),n._uU(18),n.ALo(19,"translate"),n.qZA(),n._UZ(20,"input",5),n.ALo(21,"translate"),n.YNc(22,_,3,3,"mat-error",4),n.qZA(),n.qZA(),n.TgZ(23,"div",2),n.TgZ(24,"mat-form-field"),n.TgZ(25,"mat-label"),n._uU(26),n.ALo(27,"translate"),n.qZA(),n._UZ(28,"input",6),n.ALo(29,"translate"),n.YNc(30,b,3,3,"mat-error",4),n.qZA(),n.qZA(),n.TgZ(31,"div",2),n.TgZ(32,"mat-form-field"),n.TgZ(33,"mat-label"),n._uU(34),n.ALo(35,"translate"),n.qZA(),n._UZ(36,"input",7),n.ALo(37,"translate"),n.qZA(),n.qZA(),n.TgZ(38,"div",8),n.TgZ(39,"mat-form-field"),n.TgZ(40,"mat-label"),n._uU(41),n.ALo(42,"translate"),n.qZA(),n._UZ(43,"input",9),n.ALo(44,"translate"),n.qZA(),n.qZA(),n.TgZ(45,"div",8),n.TgZ(46,"mat-form-field"),n.TgZ(47,"mat-label"),n._uU(48),n.ALo(49,"translate"),n.qZA(),n._UZ(50,"textarea",10),n.ALo(51,"translate"),n.qZA(),n.qZA(),n.TgZ(52,"div",8),n.TgZ(53,"mat-form-field",11),n.TgZ(54,"mat-label"),n._uU(55),n.ALo(56,"translate"),n.qZA(),n._UZ(57,"mtx-select",12),n.qZA(),n.qZA(),n.TgZ(58,"div",13),n.TgZ(59,"mat-form-field",11),n.TgZ(60,"mat-label"),n._uU(61),n.ALo(62,"translate"),n.qZA(),n._UZ(63,"mtx-select",14),n.ALo(64,"async"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(65,"button",15),n.NdJ("click",function(){return e.submit()}),n._uU(66),n.ALo(67,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Oqu(n.lcZ(4,23,"menu.profile.settings")),n.xp6(2),n.Q6J("formGroup",e.form1),n.xp6(5),n.Oqu(n.lcZ(11,25,"login.username")),n.xp6(2),n.Q6J("placeholder",n.lcZ(13,27,"login.username")),n.xp6(2),n.Q6J("ngIf",e.form1.get("username").invalid),n.xp6(4),n.Oqu(n.lcZ(19,29,"login.fullname")),n.xp6(2),n.Q6J("placeholder",n.lcZ(21,31,"login.fullname")),n.xp6(2),n.Q6J("ngIf",e.form1.get("fullname").invalid),n.xp6(4),n.Oqu(n.lcZ(27,33,"login.email")),n.xp6(2),n.Q6J("placeholder",n.lcZ(29,35,"login.email")),n.xp6(2),n.Q6J("ngIf",e.form1.get("email").invalid),n.xp6(4),n.Oqu(n.lcZ(35,37,"login.phone")),n.xp6(2),n.Q6J("placeholder",n.lcZ(37,39,"login.phone")),n.xp6(5),n.Oqu(n.lcZ(42,41,"login.address")),n.xp6(2),n.Q6J("placeholder",n.lcZ(44,43,"login.address")),n.xp6(5),n.Oqu(n.lcZ(49,45,"login.remark")),n.xp6(2),n.Q6J("placeholder",n.lcZ(51,47,"login.remark")),n.xp6(5),n.Oqu(n.lcZ(56,49,"common.languages")),n.xp6(2),n.Q6J("items",e.languages),n.xp6(4),n.Oqu(n.lcZ(62,51,"common.timezone")),n.xp6(2),n.Q6J("items",n.lcZ(64,53,e.timezones$)),n.xp6(2),n.Q6J("disabled",e.form1.invalid),n.xp6(1),n.Oqu(n.lcZ(67,55,"common.save")))},directives:[d.q,c.a8,c.n5,s._Y,s.JL,s.sg,Z.xw,Z.SQ,Z.yH,f.KE,f.hX,g.Nt,s.Fj,s.JJ,s.u,s.Q7,q.O5,A.MS,h.lW,f.TO],pipes:[u.X$,q.Ov],styles:[""]}),t})()},{path:"password",component:(()=>{class t{constructor(t,e,a,r){this.toastr=t,this.fb=e,this.translate=a,this._api=r,this.form1=this.fb.group({oldPassword:["",[s.kI.required]],password:["",[s.kI.required]],password2:["",[s.kI.required]]})}ngOnInit(){}submit(){this._api.user_setPassword(this.form1.getRawValue()).subscribe(t=>{1==t.successful&&this.toastr.success(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i._W),n.Y36(s.qu),n.Y36(u.sK),n.Y36(p.t))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-setting-password"]],decls:30,vars:29,consts:[[1,"form-field-full",3,"formGroup"],["matInput","","type","password","formControlName","oldPassword","required","",3,"placeholder"],[4,"ngIf"],["matInput","","type","password","formControlName","password","required","",3,"placeholder"],["matInput","","type","password","formControlName","password2","required","",3,"placeholder"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"]],template:function(t,e){1&t&&(n._UZ(0,"page-header"),n.TgZ(1,"mat-card"),n.TgZ(2,"mat-card-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"form",0),n.TgZ(6,"mat-form-field"),n.TgZ(7,"mat-label"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n._UZ(10,"input",1),n.ALo(11,"translate"),n.YNc(12,T,3,3,"mat-error",2),n.qZA(),n.TgZ(13,"mat-form-field"),n.TgZ(14,"mat-label"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n._UZ(17,"input",3),n.ALo(18,"translate"),n.YNc(19,L,3,3,"mat-error",2),n.qZA(),n.TgZ(20,"mat-form-field"),n.TgZ(21,"mat-label"),n._uU(22),n.ALo(23,"translate"),n.qZA(),n._UZ(24,"input",4),n.ALo(25,"translate"),n.YNc(26,U,3,3,"mat-error",2),n.qZA(),n.TgZ(27,"button",5),n.NdJ("click",function(){return e.submit()}),n._uU(28),n.ALo(29,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Oqu(n.lcZ(4,13,"menu.profile.password")),n.xp6(2),n.Q6J("formGroup",e.form1),n.xp6(3),n.Oqu(n.lcZ(9,15,"user.password.old")),n.xp6(2),n.Q6J("placeholder",n.lcZ(11,17,"user.password.old")),n.xp6(2),n.Q6J("ngIf",e.form1.get("oldPassword").invalid),n.xp6(3),n.Oqu(n.lcZ(16,19,"user.password.new")),n.xp6(2),n.Q6J("placeholder",n.lcZ(18,21,"user.password.new")),n.xp6(2),n.Q6J("ngIf",e.form1.get("password").invalid),n.xp6(3),n.Oqu(n.lcZ(23,23,"user.password2")),n.xp6(2),n.Q6J("placeholder",n.lcZ(25,25,"user.password2")),n.xp6(2),n.Q6J("ngIf",e.form1.get("password2").invalid),n.xp6(1),n.Q6J("disabled",e.form1.invalid),n.xp6(1),n.Oqu(n.lcZ(29,27,"common.save")))},directives:[d.q,c.a8,c.n5,s._Y,s.JL,s.sg,f.KE,f.hX,g.Nt,s.Fj,s.JJ,s.u,s.Q7,q.O5,h.lW,f.TO],pipes:[u.X$],styles:[""]}),t})()},{path:"",component:(()=>{class t{constructor(t,e,a,r){this.toastr=t,this.fb=e,this.translate=a,this._api=r,this.form1=this.fb.group({dbType:["",[s.kI.required]],server:["",[]],port:[3306,[]],database:["",[]],user:["",[]],password:["",[]]})}ngOnInit(){this.dbTypes=[{key:"Sqlite",name:"Sqlite"},{key:"MySQL",name:"MySQL"}],this.loadData()}loadData(){this._api.user_getsetting().subscribe(t=>{this.form1.setValue(t)})}submit(){this._api.user_savesetting(this.form1.value).subscribe(t=>{1==t.successful?(this.toastr.success(t.message),setTimeout(()=>location.reload(),3e3)):this.toastr.error(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i._W),n.Y36(s.qu),n.Y36(u.sK),n.Y36(p.t))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-setting-setting"]],decls:18,vars:16,consts:[[1,"form-field-full",3,"formGroup"],[1,"w-full"],["bindLabel","name","bindValue","key","autofocus","","formControlName","dbType",3,"items"],[4,"ngIf"],[1,"tip"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"],["matInput","","type","text","formControlName","server",3,"placeholder"],["matInput","","type","number","formControlName","port",3,"placeholder"],["matInput","","type","text","formControlName","database",3,"placeholder"],["matInput","","type","text","formControlName","user",3,"placeholder"],["matInput","","type","text","formControlName","password",3,"placeholder"]],template:function(t,e){1&t&&(n._UZ(0,"page-header"),n.TgZ(1,"mat-card"),n.TgZ(2,"mat-card-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"form",0),n.TgZ(6,"mat-form-field",1),n.TgZ(7,"mat-label"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n._UZ(10,"mtx-select",2),n.qZA(),n.YNc(11,v,31,30,"div",3),n.TgZ(12,"div",4),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"button",5),n.NdJ("click",function(){return e.submit()}),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Oqu(n.lcZ(4,8,"menu.systemsetting")),n.xp6(2),n.Q6J("formGroup",e.form1),n.xp6(3),n.Oqu(n.lcZ(9,10,"setting.dbtype")),n.xp6(2),n.Q6J("items",e.dbTypes),n.xp6(1),n.Q6J("ngIf","MySQL"==e.form1.value.dbType),n.xp6(2),n.Oqu(n.lcZ(14,12,"setting.db.tip")),n.xp6(2),n.Q6J("disabled",e.form1.invalid),n.xp6(1),n.Oqu(n.lcZ(17,14,"common.save")))},directives:[d.q,c.a8,c.n5,s._Y,s.JL,s.sg,f.KE,f.hX,A.MS,s.JJ,s.u,q.O5,h.lW,g.Nt,s.Fj,s.wV],pipes:[u.X$],styles:[".tip[_ngcontent-%COMP%]{color:red;font-size:14px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[l.Bz.forChild(J)],l.Bz]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[r.m,w]]}),t})()}}]);