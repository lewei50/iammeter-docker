!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}(self.webpackChunkclient=self.webpackChunkclient||[]).push([[814],{12814:function(e,a,o){"use strict";o.r(a),o.d(a,{ExtensionModule:function(){return D}});var n=o(56036),l=o(63423),r=o(10250),s=o(3679),c=o(22238),u=o(37716),d=o(49344),p=o(29790),f=o(85557),m=o(76627),g=o(38583),h=o(35618),v=o(98295),Z=o(58308),x=o(83166),A=o(7539),b=o(51095);function y(t,e){1&t&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&t&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function q(t,e){1&t&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&t&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function T(t,e){1&t&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&t&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function _(t,e){if(1&t&&(u.TgZ(0,"form",3),u.TgZ(1,"div",4),u.TgZ(2,"div",5),u.TgZ(3,"mat-form-field"),u.TgZ(4,"mat-label"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u._UZ(7,"mtx-select",6),u.YNc(8,y,3,3,"mat-error",2),u.qZA(),u.qZA(),u.TgZ(9,"div",5),u.TgZ(10,"mat-form-field"),u.TgZ(11,"mat-label"),u._uU(12),u.ALo(13,"translate"),u.qZA(),u._UZ(14,"input",7),u.ALo(15,"translate"),u.YNc(16,q,3,3,"mat-error",2),u.qZA(),u.qZA(),u.TgZ(17,"div",5),u.TgZ(18,"mat-form-field"),u.TgZ(19,"mat-label"),u._uU(20),u.ALo(21,"translate"),u.qZA(),u._UZ(22,"input",8),u.ALo(23,"translate"),u.YNc(24,T,3,3,"mat-error",2),u.qZA(),u.qZA(),u.TgZ(25,"div",5),u.TgZ(26,"mat-checkbox",9),u._uU(27),u.ALo(28,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var i=u.oxw();u.Q6J("formGroup",i.form1),u.xp6(5),u.Oqu(u.lcZ(6,11,"bll.place-name")),u.xp6(2),u.Q6J("items",i.places),u.xp6(1),u.Q6J("ngIf",i.form1.get("placeId").invalid),u.xp6(4),u.Oqu(u.lcZ(13,13,"extension.api-key")),u.xp6(2),u.Q6J("placeholder",u.lcZ(15,15,"extension.api-key")),u.xp6(2),u.Q6J("ngIf",i.form1.get("apiKey").invalid),u.xp6(4),u.Oqu(u.lcZ(21,17,"extension.system-id")),u.xp6(2),u.Q6J("placeholder",u.lcZ(23,19,"extension.system-id")),u.xp6(2),u.Q6J("ngIf",i.form1.get("deviceId").invalid),u.xp6(3),u.hij("",u.lcZ(28,21,"extension.is-active")," ")}}function w(t,e){if(1&t){var i=u.EpF();u.TgZ(0,"mat-dialog-actions"),u.TgZ(1,"button",10),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"button",11),u.NdJ("click",function(){return u.CHM(i),u.oxw().save()}),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,3,"common.close")),u.xp6(2),u.Q6J("disabled",a.form1.invalid),u.xp6(1),u.Oqu(u.lcZ(6,5,"common.save"))}}var k=function(){var e=function(){function e(i,a,o,n,l,r){var c=this;t(this,e),this.dialogRef=i,this.toastr=a,this.fb=o,this.translate=n,this._api=l,this.data=r,this.places=this._api.place_placelist().subscribe(function(t){c.places=t.data,c.form1=c.fb.group({id:[null],type:["pvoutput"],placeId:[null,[s.kI.required]],isActive:[!0],apiKey:[""],deviceId:[""]}),c.form1.patchValue(c.data)})}return i(e,[{key:"ngOnInit",value:function(){console.log(this.places)}},{key:"onClose",value:function(){this.dialogRef.close()}},{key:"save",value:function(){var t=this;console.log(this.data.id),this._api.extension_save(this.data.id,this.form1.getRawValue()).subscribe(function(e){!0===e.successful&&t.toastr.success(e.message),t.dialogRef.close(!0)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(c.so),u.Y36(d._W),u.Y36(s.qu),u.Y36(p.sK),u.Y36(f.t),u.Y36(c.WI))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-extension-pvoutput-edit"]],decls:8,vars:6,consts:[["mat-dialog-title",""],["class","form-field-full",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","100","fxFlex.lt-sm","100"],["bindLabel","name","bindValue","id","formControlName","placeId",3,"items"],["matInput","","type","text","formControlName","apiKey","required","",3,"placeholder"],["matInput","","type","text","formControlName","deviceId","required","",3,"placeholder"],["formControlName","isActive"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"mat-icon"),u._uU(2),u.qZA(),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"mat-dialog-content"),u.YNc(6,_,29,23,"form",1),u.qZA(),u.YNc(7,w,7,7,"mat-dialog-actions",2)),2&t&&(u.xp6(2),u.Oqu("00000000-0000-0000-0000-000000000000"!=e.data.id?"edit":"add"),u.xp6(1),u.hij(" ",u.lcZ(4,4,"00000000-0000-0000-0000-000000000000"!=e.data.id?"extension.edit":"extension.add")," "),u.xp6(3),u.Q6J("ngIf",null!=e.form1),u.xp6(1),u.Q6J("ngIf",e.form1))},directives:[c.uh,m.Hw,c.xY,g.O5,s._Y,s.JL,s.sg,h.xw,h.SQ,h.yH,v.KE,v.hX,Z.MS,s.JJ,s.u,x.Nt,s.Fj,s.Q7,A.oG,v.TO,c.H8,b.lW,c.ZT],pipes:[p.X$],styles:[".mat-dialog-content[_ngcontent-%COMP%]{overflow:auto;max-height:none;display:inherit}"]}),e}(),I=o(99603),Y=o(32802),J=o(63887),L=["isActiveTpl"];function U(t,e){1&t&&(u.TgZ(0,"mat-icon",7),u._uU(1,"check"),u.qZA())}function C(t,e){1&t&&(u.TgZ(0,"mat-icon",8),u._uU(1,"close"),u.qZA())}function N(t,e){if(1&t&&(u.YNc(0,U,2,0,"mat-icon",5),u.YNc(1,C,2,0,"mat-icon",6)),2&t){var i=e.$implicit;u.Q6J("ngIf",1==i.isActive),u.xp6(1),u.Q6J("ngIf",0==i.isActive)}}var O,Q,j=[{path:"pvoutput",component:(O=function(){function e(i,a,o,n,l,r){t(this,e),this.toastr=i,this.cdr=a,this._api=o,this.dialog=n,this._translate=l,this._router=r,this.columns=[],this.list=[],this.isLoading=!1}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.columns=[{header:this._translate.stream("bll.place-name"),field:"placeName",sortable:!0},{header:this._translate.stream("extension.api-key"),field:"apiKey",sortable:!0},{header:this._translate.stream("extension.system-id"),field:"deviceId",sortable:!0},{header:this._translate.stream("extension.is-active"),field:"isActive",cellTemplate:this.isActiveTpl},{header:this._translate.stream("common.operation"),field:"option",width:"180px",pinned:"right",right:"0px",type:"button",buttons:[{icon:"pageview",tooltip:"View",type:"icon",click:function(t){return window.open("https://pvoutput.org/list.jsp?sid="+t.deviceId)}},{icon:"edit",tooltip:"Edit",type:"icon",click:function(e){return t.edit(e)}},{icon:"delete",tooltip:"Delete",color:"warn",type:"icon",pop:!0,popTitle:"Confirm delete?",click:function(e){return t.delete(e)}}]}],this.loadData()}},{key:"loadData",value:function(){var t=this;this.isLoading=!0,this._api.extension_list("pvoutput").subscribe(function(e){t.list=e.data,t.isLoading=!1,t.cdr.markForCheck(),t.cdr.detectChanges()})}},{key:"edit",value:function(t){this.openDialog(t)}},{key:"openDialog",value:function(t){var e=this;this.dialog.originalOpen(k,{width:"600px",data:t}).afterClosed().subscribe(function(t){!0===t&&e.loadData()})}},{key:"add",value:function(){this.openDialog({id:r.i.createEmpty(),type:"pvoutput",isActive:!0})}},{key:"delete",value:function(t){var e=this;this._api.extension_delete(t.id).subscribe(function(t){!0===t.successful&&e.toastr.success(t.message),e.loadData()})}}]),e}(),O.\u0275fac=function(t){return new(t||O)(u.Y36(d._W),u.Y36(u.sBO),u.Y36(f.t),u.Y36(I.cP),u.Y36(p.sK),u.Y36(l.F0))},O.\u0275cmp=u.Xpm({type:O,selectors:[["app-extension-pvoutput"]],viewQuery:function(t,e){var i;1&t&&u.Gf(L,7),2&t&&u.iGM(i=u.CRH())&&(e.isActiveTpl=i.first)},decls:10,vars:9,consts:[["mat-button","",3,"click"],["aria-label","add"],["aria-label","refresh"],[3,"data","columns","loading","multiSelectable","rowSelectable","showPaginator","toolbarTitle","rowStriped","showToolbar"],["isActiveTpl",""],["style","color:green;",4,"ngIf"],["style","color:red;",4,"ngIf"],[2,"color","green"],[2,"color","red"]],template:function(t,e){1&t&&(u.TgZ(0,"page-header"),u.TgZ(1,"button",0),u.NdJ("click",function(){return e.add()}),u.TgZ(2,"mat-icon",1),u._uU(3,"add"),u.qZA(),u.qZA(),u.TgZ(4,"button",0),u.NdJ("click",function(){return e.loadData()}),u.TgZ(5,"mat-icon",2),u._uU(6,"refresh"),u.qZA(),u.qZA(),u.qZA(),u._UZ(7,"mtx-grid",3),u.YNc(8,N,2,2,"ng-template",null,4,u.W1O)),2&t&&(u.xp6(7),u.Q6J("data",e.list)("columns",e.columns)("loading",e.isLoading)("multiSelectable",!0)("rowSelectable",!1)("showPaginator",!1)("toolbarTitle","Place list")("rowStriped",!0)("showToolbar",!1))},directives:[Y.q,b.lW,m.Hw,J.CM,g.O5],styles:[""]}),O)}],S=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[l.Bz.forChild(j)],l.Bz]}),e}(),D=((Q=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({imports:[[n.m,S]]}),Q)}}])}();