(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{IyKu:function(t,e,i){"use strict";i.r(e),i.d(e,"ExtensionModule",(function(){return R}));var a=i("PCNd"),o=i("tyNb"),c=i("D465"),s=i("kLqA"),n=i("3Pt+"),l=i("0IaG"),r=i("fXoL"),d=i("5eHb"),b=i("sYmb"),p=i("NFeN"),m=i("ofXK"),u=i("XiUz"),h=i("kmnG"),f=i("YKwE"),g=i("qFsG"),v=i("bSwM"),T=i("bTqV");function y(t,e){1&t&&(r.Ub(0,"mat-error"),r.Qc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Sc(" ",r.ic(2,1,"validations.required"),""))}function C(t,e){1&t&&(r.Ub(0,"mat-error"),r.Qc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Sc(" ",r.ic(2,1,"validations.required"),""))}function x(t,e){1&t&&(r.Ub(0,"mat-error"),r.Qc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Sc(" ",r.ic(2,1,"validations.required"),""))}function w(t,e){if(1&t&&(r.Ub(0,"form",3),r.Ub(1,"div",4),r.Ub(2,"div",5),r.Ub(3,"mat-form-field"),r.Ub(4,"mat-label"),r.Qc(5),r.hc(6,"translate"),r.Tb(),r.Pb(7,"mtx-select",6),r.Oc(8,y,3,3,"mat-error",2),r.Tb(),r.Tb(),r.Ub(9,"div",5),r.Ub(10,"mat-form-field"),r.Ub(11,"mat-label"),r.Qc(12),r.hc(13,"translate"),r.Tb(),r.Pb(14,"input",7),r.hc(15,"translate"),r.Oc(16,C,3,3,"mat-error",2),r.Tb(),r.Tb(),r.Ub(17,"div",5),r.Ub(18,"mat-form-field"),r.Ub(19,"mat-label"),r.Qc(20),r.hc(21,"translate"),r.Tb(),r.Pb(22,"input",8),r.hc(23,"translate"),r.Oc(24,x,3,3,"mat-error",2),r.Tb(),r.Tb(),r.Ub(25,"div",5),r.Ub(26,"mat-checkbox",9),r.Qc(27),r.hc(28,"translate"),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc();r.pc("formGroup",t.form1),r.Cb(5),r.Rc(r.ic(6,11,"bll.place-name")),r.Cb(2),r.pc("items",t.places),r.Cb(1),r.pc("ngIf",t.form1.get("placeId").invalid),r.Cb(4),r.Rc(r.ic(13,13,"extension.api-key")),r.Cb(2),r.pc("placeholder",r.ic(15,15,"extension.api-key")),r.Cb(2),r.pc("ngIf",t.form1.get("apiKey").invalid),r.Cb(4),r.Rc(r.ic(21,17,"extension.system-id")),r.Cb(2),r.pc("placeholder",r.ic(23,19,"extension.system-id")),r.Cb(2),r.pc("ngIf",t.form1.get("deviceId").invalid),r.Cb(3),r.Sc("",r.ic(28,21,"extension.is-active")," ")}}function I(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-dialog-actions"),r.Ub(1,"button",10),r.Qc(2),r.hc(3,"translate"),r.Tb(),r.Ub(4,"button",11),r.cc("click",(function(){return r.Dc(t),r.gc().save()})),r.Qc(5),r.hc(6,"translate"),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Cb(2),r.Rc(r.ic(3,3,"common.close")),r.Cb(2),r.pc("disabled",t.form1.invalid),r.Cb(1),r.Rc(r.ic(6,5,"common.save"))}}let U=(()=>{class t{constructor(t,e,i,a,o,c){this.dialogRef=t,this.toastr=e,this.fb=i,this.translate=a,this._api=o,this.data=c,this.places=this._api.place_placelist().subscribe(t=>{this.places=t.data,this.form1=this.fb.group({id:[null],type:["pvoutput"],placeId:[null,[n.y.required]],isActive:[!0],apiKey:[""],deviceId:[""]}),this.form1.patchValue(this.data)})}ngOnInit(){console.log(this.places)}onClose(){this.dialogRef.close()}save(){console.log(this.data.id),this._api.extension_save(this.data.id,this.form1.getRawValue()).subscribe(t=>{!0===t.successful&&this.toastr.success(t.message),this.dialogRef.close(!0)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(l.i),r.Ob(d.b),r.Ob(n.g),r.Ob(b.e),r.Ob(c.a),r.Ob(l.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-extension-pvoutput-edit"]],decls:8,vars:6,consts:[["mat-dialog-title",""],["class","form-field-full",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","100","fxFlex.lt-sm","100"],["bindLabel","name","bindValue","id","formControlName","placeId",3,"items"],["matInput","","type","text","formControlName","apiKey","required","",3,"placeholder"],["matInput","","type","text","formControlName","deviceId","required","",3,"placeholder"],["formControlName","isActive"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"mat-icon"),r.Qc(2),r.Tb(),r.Qc(3),r.hc(4,"translate"),r.Tb(),r.Ub(5,"mat-dialog-content"),r.Oc(6,w,29,23,"form",1),r.Tb(),r.Oc(7,I,7,7,"mat-dialog-actions",2)),2&t&&(r.Cb(2),r.Rc("00000000-0000-0000-0000-000000000000"!=e.data.id?"edit":"add"),r.Cb(1),r.Sc(" ",r.ic(4,4,"00000000-0000-0000-0000-000000000000"!=e.data.id?"extension.edit":"extension.add")," "),r.Cb(3),r.pc("ngIf",null!=e.form1),r.Cb(1),r.pc("ngIf",e.form1))},directives:[l.j,p.a,l.g,m.n,n.z,n.s,n.l,u.c,u.d,u.a,h.c,h.g,f.a,n.r,n.j,g.b,n.d,n.x,v.a,h.b,l.d,T.b,l.e],pipes:[b.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{overflow:auto;max-height:none;display:inherit}"]}),t})();var O=i("r0g6"),k=i("tgey"),_=i("hGDI");const Q=["isActiveTpl"];function D(t,e){1&t&&(r.Ub(0,"mat-icon",7),r.Qc(1,"check"),r.Tb())}function S(t,e){1&t&&(r.Ub(0,"mat-icon",8),r.Qc(1,"close"),r.Tb())}function A(t,e){if(1&t&&(r.Oc(0,D,2,0,"mat-icon",5),r.Oc(1,S,2,0,"mat-icon",6)),2&t){const t=e.$implicit;r.pc("ngIf",1==t.isActive),r.Cb(1),r.pc("ngIf",0==t.isActive)}}const L=[{path:"pvoutput",component:(()=>{class t{constructor(t,e,i,a,o,c){this.toastr=t,this.cdr=e,this._api=i,this.dialog=a,this._translate=o,this._router=c,this.columns=[],this.list=[],this.isLoading=!1}ngOnInit(){this.columns=[{header:this._translate.stream("bll.place-name"),field:"placeName",sortable:!0},{header:this._translate.stream("extension.api-key"),field:"apiKey",sortable:!0},{header:this._translate.stream("extension.system-id"),field:"deviceId",sortable:!0},{header:this._translate.stream("extension.is-active"),field:"isActive",cellTemplate:this.isActiveTpl},{header:this._translate.stream("common.operation"),field:"option",width:"180px",pinned:"right",right:"0px",type:"button",buttons:[{icon:"pageview",tooltip:"View",type:"icon",click:t=>window.open("https://pvoutput.org/list.jsp?sid="+t.deviceId)},{icon:"edit",tooltip:"Edit",type:"icon",click:t=>this.edit(t)},{icon:"delete",tooltip:"Delete",color:"warn",type:"icon",pop:!0,popTitle:"Confirm delete?",click:t=>this.delete(t)}]}],this.loadData()}loadData(){this.isLoading=!0,this._api.extension_list("pvoutput").subscribe(t=>{this.list=t.data,this.isLoading=!1,this.cdr.markForCheck(),this.cdr.detectChanges()})}edit(t){this.openDialog(t)}openDialog(t){this.dialog.originalOpen(U,{width:"600px",data:t}).afterClosed().subscribe(t=>{!0===t&&this.loadData()})}add(){this.openDialog({id:s.Guid.createEmpty(),type:"pvoutput",isActive:!0})}delete(t){this._api.extension_delete(t.id).subscribe(t=>{!0===t.successful&&this.toastr.success(t.message),this.loadData()})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(d.b),r.Ob(r.h),r.Ob(c.a),r.Ob(O.a),r.Ob(b.e),r.Ob(o.f))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-extension-pvoutput"]],viewQuery:function(t,e){var i;1&t&&r.Ic(Q,!0),2&t&&r.yc(i=r.dc())&&(e.isActiveTpl=i.first)},decls:10,vars:9,consts:[["mat-button","",3,"click"],["aria-label","add"],["aria-label","refresh"],[3,"data","columns","loading","multiSelectable","rowSelectable","showPaginator","toolbarTitle","rowStriped","showToolbar"],["isActiveTpl",""],["style","color:green;",4,"ngIf"],["style","color:red;",4,"ngIf"],[2,"color","green"],[2,"color","red"]],template:function(t,e){1&t&&(r.Ub(0,"page-header"),r.Ub(1,"button",0),r.cc("click",(function(){return e.add()})),r.Ub(2,"mat-icon",1),r.Qc(3,"add"),r.Tb(),r.Tb(),r.Ub(4,"button",0),r.cc("click",(function(){return e.loadData()})),r.Ub(5,"mat-icon",2),r.Qc(6,"refresh"),r.Tb(),r.Tb(),r.Tb(),r.Pb(7,"mtx-grid",3),r.Oc(8,A,2,2,"ng-template",null,4,r.Pc)),2&t&&(r.Cb(7),r.pc("data",e.list)("columns",e.columns)("loading",e.isLoading)("multiSelectable",!0)("rowSelectable",!1)("showPaginator",!1)("toolbarTitle","Place list")("rowStriped",!0)("showToolbar",!1))},directives:[k.a,T.b,p.a,_.a,m.n],styles:[""]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(L)],o.j]}),t})(),R=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[a.a,P]]}),t})()}}]);