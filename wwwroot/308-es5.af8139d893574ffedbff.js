!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}(self.webpackChunkclient=self.webpackChunkclient||[]).push([[308],{75308:function(t,r,o){"use strict";o.r(r),o.d(r,{SettingModule:function(){return Y}});var l=o(56036),n=o(63423),s=o(3679),i=o(88002),u=o(37716),m=o(49344),p=o(29790),c=o(41260),d=o(85557),f=o(32802),Z=o(93738),g=o(35618),q=o(98295),A=o(83166),h=o(38583),x=o(58308),b=o(51095);function _(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function T(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function v(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"validations.required"),""))}function L(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"validations.required")))}function y(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"validations.required")))}function U(e,t){1&e&&(u.TgZ(0,"mat-error"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"validations.required")))}function w(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"mat-form-field"),u.TgZ(2,"mat-label"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u._UZ(5,"input",6),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"mat-form-field"),u.TgZ(8,"mat-label"),u._uU(9),u.ALo(10,"translate"),u.qZA(),u._UZ(11,"input",7),u.ALo(12,"translate"),u.qZA(),u.TgZ(13,"mat-form-field"),u.TgZ(14,"mat-label"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u._UZ(17,"input",8),u.ALo(18,"translate"),u.qZA(),u.TgZ(19,"mat-form-field"),u.TgZ(20,"mat-label"),u._uU(21),u.ALo(22,"translate"),u.qZA(),u._UZ(23,"input",9),u.ALo(24,"translate"),u.qZA(),u.TgZ(25,"mat-form-field"),u.TgZ(26,"mat-label"),u._uU(27),u.ALo(28,"translate"),u.qZA(),u._UZ(29,"input",10),u.ALo(30,"translate"),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,10,"setting.server")),u.xp6(2),u.Q6J("placeholder",u.lcZ(6,12,"setting.server")),u.xp6(4),u.Oqu(u.lcZ(10,14,"setting.port")),u.xp6(2),u.Q6J("placeholder",u.lcZ(12,16,"setting.port")),u.xp6(4),u.Oqu(u.lcZ(16,18,"setting.database")),u.xp6(2),u.Q6J("placeholder",u.lcZ(18,20,"setting.database")),u.xp6(4),u.Oqu(u.lcZ(22,22,"setting.user")),u.xp6(2),u.Q6J("placeholder",u.lcZ(24,24,"setting.user")),u.xp6(4),u.Oqu(u.lcZ(28,26,"login.password")),u.xp6(2),u.Q6J("placeholder",u.lcZ(30,28,"login.password")))}var J,I,O,k,Q=[{path:"userSetting",component:(O=function(){function t(a,r,o,l,n){e(this,t),this.toastr=a,this.fb=r,this._translate=o,this._setting=l,this._api=n,this.form1=this.fb.group({username:["",[s.kI.required]],fullname:["",[s.kI.required]],email:["",[s.kI.required]],phone:[""],address:[""],remark:[""],lang:["",[s.kI.required]],timeZoneInfoId:["",[s.kI.required]]})}return a(t,[{key:"ngOnInit",value:function(){this.languages=this._setting.getOptions().languages,this.loadData()}},{key:"loadData",value:function(){var e=this;this.timezones$=this._api.common_timezoneList().pipe((0,i.U)(function(e){return e.data})),this._api.user_getuser().subscribe(function(t){return e.form1.setValue(t.data)})}},{key:"submit",value:function(){var e=this;this._api.user_saveuser(this.form1.value).subscribe(function(t){1==t.successful&&(e._translate.currentLang!=e.form1.value.lang&&(e._translate.use(e.form1.value.lang),e._setting.setLanguage(e.form1.value.lang)),e.toastr.success(t.message))})}}]),t}(),O.\u0275fac=function(e){return new(e||O)(u.Y36(m._W),u.Y36(s.qu),u.Y36(p.sK),u.Y36(c.gb),u.Y36(d.t))},O.\u0275cmp=u.Xpm({type:O,selectors:[["app-setting-userSetting"]],decls:68,vars:57,consts:[[1,"form-field-full",3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","type","text","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","type","text","formControlName","fullname","required","",3,"placeholder"],["matInput","","type","text","formControlName","email","required","",3,"placeholder"],["matInput","","type","text","formControlName","phone",3,"placeholder"],["fxFlex","100","fxFlex.lt-sm","100"],["matInput","","type","text","formControlName","address",3,"placeholder"],["matInput","","placeholder","Textarea","rows","5","formControlName","remark",3,"placeholder"],[1,"w-full"],["bindLabel","name","bindValue","key","autofocus","","formControlName","lang",3,"items"],["fxFlex","50","fxFlex.lt-sm","100","hidden","true"],["bindLabel","name","bindValue","key","autofocus","","formControlName","timeZoneInfoId",3,"items"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"]],template:function(e,t){1&e&&(u._UZ(0,"page-header"),u.TgZ(1,"mat-card"),u.TgZ(2,"mat-card-title"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"form",0),u.TgZ(6,"div",1),u.TgZ(7,"div",2),u.TgZ(8,"mat-form-field"),u.TgZ(9,"mat-label"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u._UZ(12,"input",3),u.ALo(13,"translate"),u.YNc(14,_,3,3,"mat-error",4),u.qZA(),u.qZA(),u.TgZ(15,"div",2),u.TgZ(16,"mat-form-field"),u.TgZ(17,"mat-label"),u._uU(18),u.ALo(19,"translate"),u.qZA(),u._UZ(20,"input",5),u.ALo(21,"translate"),u.YNc(22,T,3,3,"mat-error",4),u.qZA(),u.qZA(),u.TgZ(23,"div",2),u.TgZ(24,"mat-form-field"),u.TgZ(25,"mat-label"),u._uU(26),u.ALo(27,"translate"),u.qZA(),u._UZ(28,"input",6),u.ALo(29,"translate"),u.YNc(30,v,3,3,"mat-error",4),u.qZA(),u.qZA(),u.TgZ(31,"div",2),u.TgZ(32,"mat-form-field"),u.TgZ(33,"mat-label"),u._uU(34),u.ALo(35,"translate"),u.qZA(),u._UZ(36,"input",7),u.ALo(37,"translate"),u.qZA(),u.qZA(),u.TgZ(38,"div",8),u.TgZ(39,"mat-form-field"),u.TgZ(40,"mat-label"),u._uU(41),u.ALo(42,"translate"),u.qZA(),u._UZ(43,"input",9),u.ALo(44,"translate"),u.qZA(),u.qZA(),u.TgZ(45,"div",8),u.TgZ(46,"mat-form-field"),u.TgZ(47,"mat-label"),u._uU(48),u.ALo(49,"translate"),u.qZA(),u._UZ(50,"textarea",10),u.ALo(51,"translate"),u.qZA(),u.qZA(),u.TgZ(52,"div",8),u.TgZ(53,"mat-form-field",11),u.TgZ(54,"mat-label"),u._uU(55),u.ALo(56,"translate"),u.qZA(),u._UZ(57,"mtx-select",12),u.qZA(),u.qZA(),u.TgZ(58,"div",13),u.TgZ(59,"mat-form-field",11),u.TgZ(60,"mat-label"),u._uU(61),u.ALo(62,"translate"),u.qZA(),u._UZ(63,"mtx-select",14),u.ALo(64,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(65,"button",15),u.NdJ("click",function(){return t.submit()}),u._uU(66),u.ALo(67,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,23,"menu.profile.settings")),u.xp6(2),u.Q6J("formGroup",t.form1),u.xp6(5),u.Oqu(u.lcZ(11,25,"login.username")),u.xp6(2),u.Q6J("placeholder",u.lcZ(13,27,"login.username")),u.xp6(2),u.Q6J("ngIf",t.form1.get("username").invalid),u.xp6(4),u.Oqu(u.lcZ(19,29,"login.fullname")),u.xp6(2),u.Q6J("placeholder",u.lcZ(21,31,"login.fullname")),u.xp6(2),u.Q6J("ngIf",t.form1.get("fullname").invalid),u.xp6(4),u.Oqu(u.lcZ(27,33,"login.email")),u.xp6(2),u.Q6J("placeholder",u.lcZ(29,35,"login.email")),u.xp6(2),u.Q6J("ngIf",t.form1.get("email").invalid),u.xp6(4),u.Oqu(u.lcZ(35,37,"login.phone")),u.xp6(2),u.Q6J("placeholder",u.lcZ(37,39,"login.phone")),u.xp6(5),u.Oqu(u.lcZ(42,41,"login.address")),u.xp6(2),u.Q6J("placeholder",u.lcZ(44,43,"login.address")),u.xp6(5),u.Oqu(u.lcZ(49,45,"login.remark")),u.xp6(2),u.Q6J("placeholder",u.lcZ(51,47,"login.remark")),u.xp6(5),u.Oqu(u.lcZ(56,49,"common.languages")),u.xp6(2),u.Q6J("items",t.languages),u.xp6(4),u.Oqu(u.lcZ(62,51,"common.timezone")),u.xp6(2),u.Q6J("items",u.lcZ(64,53,t.timezones$)),u.xp6(2),u.Q6J("disabled",t.form1.invalid),u.xp6(1),u.Oqu(u.lcZ(67,55,"common.save")))},directives:[f.q,Z.a8,Z.n5,s._Y,s.JL,s.sg,g.xw,g.SQ,g.yH,q.KE,q.hX,A.Nt,s.Fj,s.JJ,s.u,s.Q7,h.O5,x.MS,b.lW,q.TO],pipes:[p.X$,h.Ov],styles:[""]}),O)},{path:"password",component:(I=function(){function t(a,r,o,l){e(this,t),this.toastr=a,this.fb=r,this.translate=o,this._api=l,this.form1=this.fb.group({oldPassword:["",[s.kI.required]],password:["",[s.kI.required]],password2:["",[s.kI.required]]})}return a(t,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){var e=this;this._api.user_setPassword(this.form1.getRawValue()).subscribe(function(t){1==t.successful&&e.toastr.success(t.message)})}}]),t}(),I.\u0275fac=function(e){return new(e||I)(u.Y36(m._W),u.Y36(s.qu),u.Y36(p.sK),u.Y36(d.t))},I.\u0275cmp=u.Xpm({type:I,selectors:[["app-setting-password"]],decls:30,vars:29,consts:[[1,"form-field-full",3,"formGroup"],["matInput","","type","password","formControlName","oldPassword","required","",3,"placeholder"],[4,"ngIf"],["matInput","","type","password","formControlName","password","required","",3,"placeholder"],["matInput","","type","password","formControlName","password2","required","",3,"placeholder"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"]],template:function(e,t){1&e&&(u._UZ(0,"page-header"),u.TgZ(1,"mat-card"),u.TgZ(2,"mat-card-title"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"form",0),u.TgZ(6,"mat-form-field"),u.TgZ(7,"mat-label"),u._uU(8),u.ALo(9,"translate"),u.qZA(),u._UZ(10,"input",1),u.ALo(11,"translate"),u.YNc(12,L,3,3,"mat-error",2),u.qZA(),u.TgZ(13,"mat-form-field"),u.TgZ(14,"mat-label"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u._UZ(17,"input",3),u.ALo(18,"translate"),u.YNc(19,y,3,3,"mat-error",2),u.qZA(),u.TgZ(20,"mat-form-field"),u.TgZ(21,"mat-label"),u._uU(22),u.ALo(23,"translate"),u.qZA(),u._UZ(24,"input",4),u.ALo(25,"translate"),u.YNc(26,U,3,3,"mat-error",2),u.qZA(),u.TgZ(27,"button",5),u.NdJ("click",function(){return t.submit()}),u._uU(28),u.ALo(29,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,13,"menu.profile.password")),u.xp6(2),u.Q6J("formGroup",t.form1),u.xp6(3),u.Oqu(u.lcZ(9,15,"user.password.old")),u.xp6(2),u.Q6J("placeholder",u.lcZ(11,17,"user.password.old")),u.xp6(2),u.Q6J("ngIf",t.form1.get("oldPassword").invalid),u.xp6(3),u.Oqu(u.lcZ(16,19,"user.password.new")),u.xp6(2),u.Q6J("placeholder",u.lcZ(18,21,"user.password.new")),u.xp6(2),u.Q6J("ngIf",t.form1.get("password").invalid),u.xp6(3),u.Oqu(u.lcZ(23,23,"user.password2")),u.xp6(2),u.Q6J("placeholder",u.lcZ(25,25,"user.password2")),u.xp6(2),u.Q6J("ngIf",t.form1.get("password2").invalid),u.xp6(1),u.Q6J("disabled",t.form1.invalid),u.xp6(1),u.Oqu(u.lcZ(29,27,"common.save")))},directives:[f.q,Z.a8,Z.n5,s._Y,s.JL,s.sg,q.KE,q.hX,A.Nt,s.Fj,s.JJ,s.u,s.Q7,h.O5,b.lW,q.TO],pipes:[p.X$],styles:[""]}),I)},{path:"",component:(J=function(){function t(a,r,o,l){e(this,t),this.toastr=a,this.fb=r,this.translate=o,this._api=l,this.form1=this.fb.group({dbType:["",[s.kI.required]],server:["",[]],port:[3306,[]],database:["",[]],user:["",[]],password:["",[]]})}return a(t,[{key:"ngOnInit",value:function(){this.dbTypes=[{key:"Sqlite",name:"Sqlite"},{key:"MySQL",name:"MySQL"}],this.loadData()}},{key:"loadData",value:function(){var e=this;this._api.user_getsetting().subscribe(function(t){e.form1.setValue(t)})}},{key:"submit",value:function(){var e=this;this._api.user_savesetting(this.form1.value).subscribe(function(t){1==t.successful?(e.toastr.success(t.message),setTimeout(function(){return location.reload()},3e3)):e.toastr.error(t.message)})}}]),t}(),J.\u0275fac=function(e){return new(e||J)(u.Y36(m._W),u.Y36(s.qu),u.Y36(p.sK),u.Y36(d.t))},J.\u0275cmp=u.Xpm({type:J,selectors:[["app-setting-setting"]],decls:18,vars:16,consts:[[1,"form-field-full",3,"formGroup"],[1,"w-full"],["bindLabel","name","bindValue","key","autofocus","","formControlName","dbType",3,"items"],[4,"ngIf"],[1,"tip"],["mat-raised-button","","color","primary",1,"m-t-8",3,"disabled","click"],["matInput","","type","text","formControlName","server",3,"placeholder"],["matInput","","type","number","formControlName","port",3,"placeholder"],["matInput","","type","text","formControlName","database",3,"placeholder"],["matInput","","type","text","formControlName","user",3,"placeholder"],["matInput","","type","text","formControlName","password",3,"placeholder"]],template:function(e,t){1&e&&(u._UZ(0,"page-header"),u.TgZ(1,"mat-card"),u.TgZ(2,"mat-card-title"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"form",0),u.TgZ(6,"mat-form-field",1),u.TgZ(7,"mat-label"),u._uU(8),u.ALo(9,"translate"),u.qZA(),u._UZ(10,"mtx-select",2),u.qZA(),u.YNc(11,w,31,30,"div",3),u.TgZ(12,"div",4),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"button",5),u.NdJ("click",function(){return t.submit()}),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,8,"menu.systemsetting")),u.xp6(2),u.Q6J("formGroup",t.form1),u.xp6(3),u.Oqu(u.lcZ(9,10,"setting.dbtype")),u.xp6(2),u.Q6J("items",t.dbTypes),u.xp6(1),u.Q6J("ngIf","MySQL"==t.form1.value.dbType),u.xp6(2),u.Oqu(u.lcZ(14,12,"setting.db.tip")),u.xp6(2),u.Q6J("disabled",t.form1.invalid),u.xp6(1),u.Oqu(u.lcZ(17,14,"common.save")))},directives:[f.q,Z.a8,Z.n5,s._Y,s.JL,s.sg,q.KE,q.hX,x.MS,s.JJ,s.u,h.O5,b.lW,A.Nt,s.Fj,s.wV],pipes:[p.X$],styles:[".tip[_ngcontent-%COMP%]{color:red;font-size:14px}"]}),J)}],N=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.Bz.forChild(Q)],n.Bz]}),t}(),Y=((k=function t(){e(this,t)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=u.oAB({type:k}),k.\u0275inj=u.cJS({imports:[[l.m,N]]}),k)}}])}();